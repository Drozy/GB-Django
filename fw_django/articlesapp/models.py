"""
–ó–∞–¥–∞–Ω–∏–µ ‚Ññ3
üìå –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å –ê–≤—Ç–æ—Ä. –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
‚óã –∏–º—è –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤
‚óã —Ñ–∞–º–∏–ª–∏—è –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤
‚óã –ø–æ—á—Ç–∞
‚óã –±–∏–æ–≥—Ä–∞—Ñ–∏—è
‚óã –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø–æ–ª–µ ‚Äú–ø–æ–ª–Ω–æ–µ –∏–º—è‚Äù, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é.

–ó–∞–¥–∞–Ω–∏–µ ‚Ññ4
üìå –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å –°—Ç–∞—Ç—å—è (–ø—É–±–ª–∏–∫–∞—Ü–∏—è). –ê–≤—Ç–æ—Ä—ã –∏–∑ –ø—Ä–æ—à–ª–æ–π –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç
–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç—å–∏. –£ —Å—Ç–∞—Ç—å–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–≤—Ç–æ—Ä. –£ —Å—Ç–∞—Ç—å–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å
—Å–ª–µ–¥—É—é—â–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
‚óã –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω–æ–π 200 —Å–∏–º–≤–æ–ª–æ–≤
‚óã —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
‚óã –¥–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç—å–∏
‚óã –∞–≤—Ç–æ—Ä —Å—Ç–∞—Ç—å–∏ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∞
‚óã –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å—Ç–∞—Ç—å–∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω–æ–π 100 —Å–∏–º–≤–æ–ª–æ–≤
‚óã –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç–∞—Ç—å–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0
‚óã —Ñ–ª–∞–≥, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ –ª–∏ —Å—Ç–∞—Ç—å—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é False

–ó–∞–¥–∞–Ω–∏–µ ‚Ññ6
üìå –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
üìå –ê–≤—Ç–æ—Ä—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–≤–æ–∏–º –∏ —á—É–∂–∏–º —Å—Ç–∞—Ç—å—è–º. –¢.–µ. —É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–∏–Ω –∞–≤—Ç–æ—Ä.
üìå –ò –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–µ. –£ –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è
‚óã –∞–≤—Ç–æ—Ä
‚óã —Å—Ç–∞—Ç—å—è
‚óã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚óã –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
‚óã –¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
"""
from django.db import models
from django.urls import reverse


class AuthorModel(models.Model):
    firstname = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100)
    email = models.EmailField()
    bio = models.TextField()
    dob = models.DateField()
    fullname = models.CharField(max_length=200, blank=True)

    def save(self, *args, **kwargs):
        self.fullname = self.firstname + ' ' + self.lastname
        return super().save(*args, **kwargs)

    def __str__(self):
        return f'Name: {self.fullname}, email: {self.email}'


class ArticleModel(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    publication_date = models.DateField(auto_now_add=True)
    author = models.ForeignKey(AuthorModel, related_name='author_article_set', on_delete=models.CASCADE)
    category = models.CharField(max_length=100)
    views_count = models.IntegerField(default=0)
    publication_flag = models.BooleanField(default=False)

    def get_absolute_url(self):
        return reverse('article_full', kwargs={'article_id': self.pk})

    def __str__(self):
        return f'{self.title}'

    def get_summary(self):
        words = str(self.content).split()
        return f'{" ".join(words[:12])}...'


class CommentModel(models.Model):
    author = models.ForeignKey(AuthorModel, related_name='author_comment_set', on_delete=models.CASCADE)
    article = models.ForeignKey(ArticleModel, related_name='article_comment_set', on_delete=models.CASCADE)
    text = models.TextField()
    publication_date = models.DateField(auto_now_add=True)
    changed_date = models.DateField(auto_now=True)

    def __str__(self):
        return f'{self.publication_date}: {self.text}'
